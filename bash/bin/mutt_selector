#!/usr/bin/env bash
WINDOW=7

window_exists() {
  tmux list-windows \
    | grep -q ^${WINDOW}
  return $?
}

create_window() {
  tmux new-window -c ${HOME} -t ${WINDOW} -n mutt -- neomutt
}

select_window() {
  tmux select-window -t:${WINDOW}
}

restart_fetchmail() {
  systemctl --user restart fetchmail-{gmail,fastmail}
}

window_exists || ( create_window && restart_fetchmail)
select_window
